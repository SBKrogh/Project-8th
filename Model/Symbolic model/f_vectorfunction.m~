clear all
close all
clc
%% Build up the f function
%Include the input to the system
U = ones(20,8);        %This should be defined in another file and then included

%Include all the parameter files 
matrices
elev_param
pipe_param
valve_param

%Define z as a vector of syms 
syms z1 z2 z3 z4 z5 z6 z7
z= [z1; z2; z3; z4; z5; z6; z7];

N = 23;
for i = 1:N
   f(:,i) = -pipe(Cp,i,B_1,U,z) - elev(delta_z,i,U) - valve(Cv,i,B_1,U,z) + dPpump(U,i);     
end

%% 
% z_0 = zeros(23,1);
% 
% sul = linsolve(f,z_0)


%%
warning('off','all')

for i = 1:length(U)
    SolF = solve(B_1*f(i,:)' == 0,z);
end
warning('on','all')
display('Solver finished')